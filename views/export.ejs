<%- include('partials/header') %>

<section class="max-w-6xl mx-auto mt-10 px-4">
  <h2 class="text-2xl font-bold mb-4">üì¶ Export Token Data for <%= selectedDate %></h2>

  <form method="get" class="mb-6">
    <label class="block text-gray-700 mb-1 font-medium">Select date:</label>
    <select name="date" onchange="this.form.submit()" class="p-2 rounded border border-gray-300 w-full max-w-sm">
      <% dates.forEach(date => { %>
        <option value="<%= date %>" <%= date === selectedDate ? 'selected' : '' %>><%= date %></option>
      <% }) %>
    </select>
  </form>

  <p class="text-sm text-gray-500 mb-4">Total tokens for <strong><%= selectedDate %></strong>: <%= tokens.length %></p>

  <div class="flex gap-4 mb-6">
    <a href="data:application/json;charset=utf-8,<%= encodeURIComponent(jsonData) %>" 
       download="tokens-<%= selectedDate %>.json"
       class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm">
      ‚¨áÔ∏è Download JSON
    </a>

    <a href="data:text/csv;charset=utf-8,<%= encodeURIComponent(csvData) %>" 
       download="tokens-<%= selectedDate %>.csv"
       class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded text-sm">
      ‚¨áÔ∏è Download CSV
    </a>
  </div>

  <div class="bg-gray-100 rounded p-4 overflow-x-auto max-h-[600px] text-sm font-mono border border-gray-300">
    <pre><%= jsonData %></pre>
  </div>
</section>

<%- include('partials/footer') %>